name: Docker Image CI

on:
  push:
    branches:
      - main
      - develop
  pull_request:
    branches:
      - main
      - develop
jobs:

  build:
  
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
    - name: C++ dependencies install
      run: |
        sudo apt update
        sudo apt install -y --no-install-recommends g++ cmake libpqxx-dev

# Application build does not required at this stage. Commented until it's needed.
        #    - name: build C++ application
    #      run: |
        #        mkdir -p build
        #        cd build
        #        cmake ..
        #        make

    - name: build Docker images
      run: |
        docker compose build
